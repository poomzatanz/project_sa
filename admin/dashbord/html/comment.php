
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ระบบวิเคราะห์ข้อมูลความคิดเห็นที่มีต่อมหาวิทยาลัยเทคโนโลยีพระจอมเกล้า
		พระนครเหนือจากเว็บไซต์สำหรับวัยรุ่นโดยเฉพาะ
		</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Bootstrap 3 template for corporate business" />
<meta name="author" content="http://iweb-studio.com" />
<!-- css -->
<style>
    body {font-family: "Lato", sans-serif;}
    
    .sidebar {
      height: 100%;
      width: 100px;
      position: fixed;
      z-index: 1;
      top: 1;
      left: 0;
      background-color: #111;
      overflow-x: hidden;
      padding-top: 16px;
    }
    
    .sidebar a {
      padding: 6px 8px 6px 16px;
      text-decoration: none;
      font-size: 20px;
      color: #818181;
      display: block;
    }
    div.c {
        position: absolute;
  right: 0;
  width: 400px;
  height: 120px;

} 
    .sidebar a:hover {
      color: #f1f1f1;
    }
    
 
    @media screen and (max-height: 450px) {
      .sidebar {padding-top: 15px;}
      .sidebar a {font-size: 18px;}
    }
    @import url(https://fonts.googleapis.com/css?family=Righteous);


h1 {
  display: inline-block;
  color: black;
  font-family: 'Righteous', serif;
  font-size: 12em; 
  text-shadow: .03em .03em 0 hsla(230,40%,50%,1);
  }
  h1:after {
    content: attr(data-shadow);
    position: absolute;
    top: .06em; left: .06em;
    z-index: -1;
    text-shadow: none;
    background-image:
      linear-gradient(
        45deg,
        transparent 45%,
        hsla(48,20%,90%,1) 45%,
        hsla(48,20%,90%,1) 55%,
        transparent 0
        );
    background-size: .05em .05em;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  
    animation: shad-anim 15s linear infinite;
    }

@keyframes shad-anim {
  0% {background-position: 0 0}
  0% {background-position: 100% -100%}
  }
    </style>
 <!-- Bootstrap Core CSS -->
 <link href="../bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
 <!-- Menu CSS -->
 <link href="../plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.css" rel="stylesheet">
 <!-- toast CSS -->
 <link href="../plugins/bower_components/toast-master/css/jquery.toast.css" rel="stylesheet">
 <!-- morris CSS -->
 <link href="../plugins/bower_components/morrisjs/morris.css" rel="stylesheet">
 <!-- chartist CSS -->
 <link href="../plugins/bower_components/chartist-js/dist/chartist.min.css" rel="stylesheet">
 <link href="../plugins/bower_components/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.css" rel="stylesheet">
 <!-- animation CSS -->
 <link href="../css/animate.css" rel="stylesheet">
 <!-- Custom CSS -->

 <!-- color CSS -->
 <link href="../css/colors/default.css" id="theme" rel="stylesheet">
<!-- Theme skin -->
<link id="t-colors" href="skins/default.css" rel="stylesheet" />

	<!-- boxed bg -->
	<link id="bodybg" href="bodybg/bg1.css" rel="stylesheet" type="text/css" />

<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="plugins/flexslider/flexslider.css" rel="stylesheet" media="screen" />	
    <link href="css/cubeportfolio.min.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
        <link rel="shortcut icon" href="https://demo.learncodeweb.com/favicon.ico">
       
        <link id="t-colors" href="skins/default.css" rel="stylesheet" />
    
    <!-- boxed bg -->
    <link id="bodybg" href="bodybg/bg1.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>



<div id="wrapper">
	<!-- start header -->
	<header>
        
			<div class="top">
				<div class="container">
					<div class="row">
						<div class="col-md-6">
							<ul class="topleft-info">
								<li><i class=""></i>ระบบวิเคราะห์ข้อมูลความคิดเห็นที่มีต่อมหาวิทยาลัยเทคโนโลยีพระจอมเกล้า
									พระนครเหนือจากเว็บไซต์สำหรับวัยรุ่นโดยเฉพาะ
									</li>
							</ul>
						</div>
						<div class="col-md-6">
						<div id="sb-search" class="sb-search">
							<form>
								<input class="sb-search-input" placeholder="Enter your search term..." type="text" value="" name="search" id="search">
								<input class="sb-search-submit" type="submit" value="">
								<span class="sb-icon-search" title="Click to start searching"></span>
							</form>
						</div>


						</div>
					</div>
				</div>
			</div>	
			
					
			<div class="navbar navbar-default navbar-static-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="" href="index.html"><img src="img/logo.png" alt="" width="100" height="100" /></a>
                </div>
             	
                <div class="navbar-collapse collapse ">
                    <ul class="nav navbar-nav">
                        <li><a href="../../index.php">หน้าหลัก</a></li>
						<li><a href="../../index.php#content">ที่มาของระบบ</a></li>
						<li><a href="../../index.php#r1">ความสามารถของระบบ</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle " data-toggle="dropdown" data-hover="dropdown" data-delay="0" data-close-others="false">แสดงข้อมูล <i class="fa fa-angle-down"></i></a>
                            <ul class="dropdown-menu">
                                 <li><a href="../../table.php">แสดงข้อมูลทั้งหมด</a></li>
                                 <li><a href="#">แสดงข้อมูลกราฟ</a></li>
                                <li><a href="#">แสดง Top 10 ความคิดเห็นทางด้านบวก</a></li>
                                  <li><a href="#">แสดง Top 10 ความคิดเห็นทางด้านลบ</a></li>
								
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle " data-toggle="dropdown" data-hover="dropdown" data-delay="0" data-close-others="false">แสดงข้อมูลกราฟ <i class="fa fa-angle-down"></i></a>
                            <ul class="dropdown-menu">
                            <li><a href="index.php"><i class=""></i> วิเคราะห์หัวข้อกระทู้</a> </li>
                            <li> <a href="text.php"><i class=""></i> วิเคราะห์เนื้อหากระทู้</a></li>
                            <li> <a href="comment.php"><i class=""></i> วิเคราะห์ความคิดเห็นของความคิดเห็น</a></li>
                            <li> <a href="text_class.php"><i class=""></i> การจัดกลุ่ม</a></li>
                            <li> <a href="cut.php"><i class=""></i> คำที่พูดถึงบ่อย</a></li>
                            </ul>
						</li>
						<li><a href="../../get_data.php">เก็บข้อมูล</a></li>
						<li><a href="../../user.php">จัดการสมาชิก</a></li>

                        <li><a href="#">ทีมงาน</a></li>
                       
                        <li><a href="../../processout.php">ออกจากระบบ</a></li>
                    </ul>
                </div>
             
            </div>
         
        </div>
      
    </header>
    <?php
 $conn = new mysqli("db4free.net","poomzaadekd2023","poomzaadekd2023","dekdanalatic2023");
      mysqli_set_charset($conn ,"UTF8");  
      $totol = array();
      $totol1 = array();
      $totol2 = array();
      $totol3 = array();
      $totols = array();
	$sql = "SELECT count(*) as num ,SUBSTRING(time, 4, 2) as month  FROM pre_web INNER JOIN pre_coment ON pre_web.pk_web = pre_coment.pk_web  WHERE pre_coment.text_a = 'positive' GROUP BY SUBSTRING(time, 4, 2) ORDER by SUBSTRING(time, 4, 2);";
    $result = $conn->query($sql);
    /* If there are results from database push to result array */

    if ($result->num_rows > 0) {
    
        while($rs = $result->fetch_assoc()) {
    
			$totol[] = "\"".$rs['num']."\"";
			
        }
    
    }

    $sql = "SELECT count(*) as num ,SUBSTRING(time, 4, 2) as month  FROM pre_web INNER JOIN pre_coment ON pre_web.pk_web = pre_coment.pk_web  WHERE pre_coment.text_a = 'negative' GROUP BY SUBSTRING(time, 4, 2) ORDER by SUBSTRING(time, 4, 2);";

    $result = $conn->query($sql);
    /* If there are results from database push to result array */

    if ($result->num_rows > 0) {
    
        while($rs = $result->fetch_assoc()) {
    
			$totol1[] = "\"".$rs['num']."\"";
			
        }
    
    }
    $sql = "SELECT count(*) as num ,SUBSTRING(time, 4, 2) as month  FROM pre_web INNER JOIN pre_coment ON pre_web.pk_web = pre_coment.pk_web  WHERE pre_coment.text_a = 'normal' GROUP BY SUBSTRING(time, 4, 2) ORDER by SUBSTRING(time, 4, 2);";
   
    $result = $conn->query($sql);
    /* If there are results from database push to result array */

    if ($result->num_rows > 0) {
    
        while($rs = $result->fetch_assoc()) {
    
			$totol2[] = "\"".$rs['num']."\"";
			
        }
    
    }

    $sql = "SELECT COUNT(pre_coment.text_a)  as num ,pre_coment.text_a as month FROM pre_web INNER JOIN pre_coment ON pre_web.pk_web = pre_coment.pk_web  WHERE pre_coment.text_a IS NOT NULL GROUP BY pre_coment.text_a ";
    $result = $conn->query($sql);
    /* If there are results from database push to result array */

    if ($result->num_rows > 0) {
    
        while($rs = $result->fetch_assoc()) {
    
            $totol3[] = "\"".$rs['num']."\"";
            $totols[] = $rs['num'];
            	
        }
    
    }

$totol = implode(",", $totol); 
$totol1 = implode(",", $totol1); 
$totol2 = implode(",", $totol2); 
$totol3 = implode(",", $totol3); 
    /* send a JSON encded array to client */

    $conn->close();
    
    ?>
	<!-- end header -->
	<section id="featured" class="bg">
    <!-- start slider -->
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>

    <div class="row" style=" right: 3050px;">
        <div class="c">
            <ul class="nav navbar-nav">
                <li class="text-right"><i class='far fa-smile-beam' style='font-size:40px;color:#23E31D;'></i><span class="counter text-success" style="color:#23E31D ;font-size:40px;"><?php echo $totols[2];?></span></li>
                <li class="text-right"><i class='far fa-angry' style='font-size:40px;color:#FA6103;' ></i> <span class="counter text-purple" style="color:#FA6103;font-size:40px;"><?php echo $totols[0];?></span></li>
                <li class="text-right"><i class='far fa-meh-blank' style='font-size:40px;color:#3e95cd;' ></i> <span class="counter text-info" style="color:#3e95cd ;font-size:40px;"><?php echo $totols[1];?></span></li>
           
            </ul>
        </div>
          
    </div>
   
	<!-- start slider -->
	<div class="container">
	  
        <div class="row">
            <!-- Column -->
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex no-block">
                            <div>
                                <h2></h2>
                                <h1 data-shadow='dang!'>วิเคราะห์ความคิดเห็น</h1>
                            </div>
                            <div class="ml-auto">
                                <ul class="list-inline text-center font-12">
                                   
                                </ul>
                               
                            </div>
                           	  
  <canvas id="chartOneContainer" width="600" height="400"></canvas>
                    
                        </div>
                       

                      

                    </div>
                </div>
            </div>
            <!-- Column -->
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex m-b-30 no-block">
                            <br><br><br>
                        <canvas id="chartTwoContainer" ></canvas>
                        <ul class="nav navbar-nav">
                        <br><br>
                        <li class="text-right" style="color:#fff ;font-size:25px;"><a href="acc_c.php">ดูประสิทธิภาพ</a></li>
                            <div class="ml-auto">
                       
                            </div>
                        </div>
                       
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.js"></script>
 
 <script>
	 var optionsOne = {
type: 'line',
data: {
 labels: ['มกราคม','กุมภาพันธุ์','มีนาคม','เมษายน','พฤษภาคม','มิถุนายน','กรกฏาคม','สิงหาคม','กันยายน','ตุลาคม','พฤษจิกายน','ธันวาคม'],
 datasets: [ 
    { 
        data: [<?php echo $totol2; ?>],
        label: "ปกติ",
        borderColor: "#3e95cd",
        fill: false
        },
        { 
        data: [<?php echo $totol; ?>],
        label: "แง่บวก",
        borderColor: "#23E31D",
        fill: false
        },
        { 
        data: [<?php echo $totol1; ?>],
        label: "แง่ลบ",
        borderColor: "#FA6103",
        fill: false
        }

	 ]
},
options: {
    scales: {
        yAxes: [{
            ticks: {
                beginAtZero:true
            }
        }]
    }
}
}

var optionsTwo = {
type: 'doughnut',
data: {
 labels: ["แง่ลบ" , "ปกติ", "แง่บวก"],
 datasets: [ 
		 {
			 label: 'Colors Two',
             data: [<?php echo $totol3; ?>],
             borderColor: ["#FA6103","#3e95cd","#23E31D"],
			
		 }
	 ]
},
options: {
    title: {
        display: true,
        text: 'ยอดรวมการวิเคราะห์'
      },
 scales: {
	 xAxes: [{
	 ticks: {
				 display: true
	 }
   }]
 },
 onClick:function(e){
    var activePoints = mychart.getElementsAtEvent(e);
	var selectedIndex = activePoints[0]._index;
	window.location="table_pos1.php?id="+this.data.labels[selectedIndex];
   


}
}
}

var ctxOne = document.getElementById('chartOneContainer');
new Chart(ctxOne, optionsOne);

var ctxTwo = document.getElementById('chartTwoContainer');
var mychart =  new Chart(ctxTwo, optionsTwo);
	 </script>     
                        

       
		
</div>
<a href="#" class="scrollup"><i class="fa fa-angle-up active"></i></a>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="../assets/node_modules/jquery/jquery.min.js"></script>
<!-- Bootstrap popper Core JavaScript -->
<script src="../assets/node_modules/bootstrap/js/popper.min.js"></script>
<script src="../assets/node_modules/bootstrap/js/bootstrap.min.js"></script>
<!-- slimscrollbar scrollbar JavaScript -->
<script src="js/perfect-scrollbar.jquery.min.js"></script>
<!--Wave Effects -->
<script src="js/waves.js"></script>
<!--Menu sidebar -->
<script src="js/sidebarmenu.js"></script>
<!--Custom JavaScript -->
<script src="js/custom.min.js"></script>
<!-- ============================================================== -->
<!-- This page plugins -->
<!-- ============================================================== -->
<!--morris JavaScript -->
<script src="../assets/node_modules/raphael/raphael-min.js"></script>
<script src="../assets/node_modules/morrisjs/morris.min.js"></script>
<!--c3 JavaScript -->
<script src="../assets/node_modules/d3/d3.min.js"></script>
<script src="../assets/node_modules/c3-master/c3.min.js"></script>
<!-- Chart JS -->
<script src="js/dashboard1.js"></script>
<!-- Placed at the end of the document so the pages load faster -->
<script src="js/jquery.min.js"></script>
<script src="js/modernizr.custom.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="plugins/flexslider/jquery.flexslider-min.js"></script> 
<script src="plugins/flexslider/flexslider.config.js"></script>
<script src="js/jquery.appear.js"></script>
<script src="js/stellar.js"></script>
<script src="js/classie.js"></script>
<script src="js/uisearch.js"></script>
<script src="js/jquery.cubeportfolio.min.js"></script>
<script src="js/google-code-prettify/prettify.js"></script>
<script src="js/animate.js"></script>
<script src="js/custom.js"></script>

<script src="../plugins/bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap Core JavaScript -->
<script src="../bootstrap/dist/js/bootstrap.min.js"></script>
<!-- Menu Plugin JavaScript -->
<script src="../plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.js"></script>
<!--slimscroll JavaScript -->
<script src="../js/jquery.slimscroll.js"></script>
<!--Wave Effects -->
<script src="../js/waves.js"></script>
<!--Counter js -->
<script src="../plugins/bower_components/waypoints/lib/jquery.waypoints.js"></script>
<script src="../plugins/bower_components/counterup/jquery.counterup.min.js"></script>
<!-- chartist chart -->
<script src="../plugins/bower_components/chartist-js/dist/chartist.min.js"></script>
<script src="../plugins/bower_components/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.min.js"></script>
<!-- Sparkline chart JavaScript -->
<script src="../plugins/bower_components/jquery-sparkline/jquery.sparkline.min.js"></script>
<!-- Custom Theme JavaScript -->
<script src="../js/custom.min.js"></script>
<script src="../js/dashboard1.js"></script>
<script src="../plugins/bower_components/toast-master/js/jquery.toast.js"></script>
</body>
</html>